# AgentFlow è®°å¿†ç³»ç»Ÿå®ç°æ€»ç»“

## å®æ–½æ—¥æœŸ
2026-01-27

## å®æ–½çŠ¶æ€
âœ… **å·²å®Œæˆ** - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°å¹¶é›†æˆ

## å®ç°çš„åŠŸèƒ½

### 1. æ•°æ®åº“ Schema âœ…

**Node.js ç‰ˆæœ¬ (SQLite)**
- æ–‡ä»¶ï¼š[nodejs/packages/database/src/memory-schema.ts](../nodejs/packages/database/src/memory-schema.ts)
- åŒ…å«è¡¨ï¼š
  - `task_context` - ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆå·¥ä½œè®°å¿†ï¼‰
  - `task_history` - ä»»åŠ¡å†å²ï¼ˆé•¿æœŸè®°å¿†ï¼‰
  - `experience_summaries` - ç»éªŒæ€»ç»“
  - `skill_usage_stats` - æŠ€èƒ½ä½¿ç”¨ç»Ÿè®¡
  - `conversations` - ä¼šè¯è®°å¿†
  - `conversation_messages` - æ¶ˆæ¯å†å²
- åŒ…å«è§†å›¾ï¼š
  - `v_task_summary` - ä»»åŠ¡æ‘˜è¦
  - `v_active_conversations` - æ´»è·ƒä¼šè¯
  - `v_skill_performance` - æŠ€èƒ½æ€§èƒ½ç»Ÿè®¡
- åŒ…å«è§¦å‘å™¨ï¼š
  - `after_task_completion` - ä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨è®°å½•åˆ°å†å²

**Go ç‰ˆæœ¬ (MySQL)**
- æ–‡ä»¶ï¼š[golang/internal/database/memory_schema.sql](../golang/internal/database/memory_schema.sql)
- ç›¸åŒçš„è¡¨ç»“æ„å’ŒåŠŸèƒ½

### 2. Master Memory Manager âœ…

**æ–‡ä»¶ï¼š** [nodejs/packages/master/src/memory-manager.ts](../nodejs/packages/master/src/memory-manager.ts)

**åŠŸèƒ½ï¼š**
- âœ… å·¥ä½œè®°å¿† API
  - `saveTaskContext()` - ä¿å­˜ä»»åŠ¡ä¸Šä¸‹æ–‡
  - `getTaskContext()` - è·å–ä»»åŠ¡ä¸Šä¸‹æ–‡
  - `updateTaskVariable()` - æ›´æ–°ä»»åŠ¡å˜é‡
  - `appendExecutionStep()` - è¿½åŠ æ‰§è¡Œå†å²

- âœ… é•¿æœŸè®°å¿† API
  - `recordTaskToHistory()` - è®°å½•ä»»åŠ¡åˆ°å†å²
  - `retrieveRelevantExperiences()` - æ£€ç´¢ç›¸å…³ç»éªŒ
  - `saveExperienceSummary()` - ä¿å­˜ç»éªŒæ€»ç»“

- âœ… ä¼šè¯è®°å¿† API
  - `getOrCreateSession()` - åˆ›å»ºæˆ–è·å–ä¼šè¯
  - `getSession()` - è·å–ä¼šè¯
  - `addMessage()` - æ·»åŠ æ¶ˆæ¯
  - `getConversationHistory()` - è·å–ä¼šè¯å†å²
  - `compressSession()` - å‹ç¼©ä¼šè¯ä¸Šä¸‹æ–‡

- âœ… ç»´æŠ¤ API
  - `cleanupExpiredMemories()` - æ¸…ç†è¿‡æœŸè®°å¿†
  - è‡ªåŠ¨æ¸…ç†è°ƒåº¦

**é›†æˆçŠ¶æ€ï¼š** å·²åœ¨ Master ä¸­å¯ç”¨ï¼ˆ[index.ts:61](../nodejs/packages/master/src/index.ts#L61)ï¼‰

### 3. Worker Memory Manager âœ…

**æ–‡ä»¶ï¼š** [nodejs/packages/worker/src/worker-memory.ts](../nodejs/packages/worker/src/worker-memory.ts)

**åŠŸèƒ½ï¼š**
- âœ… æœ¬åœ°è®°å¿†å­˜å‚¨ï¼ˆMap-basedï¼‰
- âœ… æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶
- âœ… è‡ªåŠ¨è¿‡æœŸæ¸…ç†
- âœ… è®°å¿†åˆ†ç±»ï¼ˆexecution, context, result, error, checkpointï¼‰
- âœ… ä»»åŠ¡å…³è”è®°å¿†
- âœ… å¿«ç…§åˆ›å»ºå’Œæ¢å¤
- âœ… è®°å¿†ç»Ÿè®¡
- âœ… è‡ªåŠ¨ç»´æŠ¤

**é›†æˆçŠ¶æ€ï¼š** å·²åœ¨ Worker ä¸­é›†æˆï¼ˆ[index.ts:41](../nodejs/packages/worker/src/index.ts#L41)ï¼‰

### 4. Worker â†” Master è®°å¿†åŒæ­¥ âœ…

**å®ç°ï¼š**
- âœ… Worker åˆ›å»ºè®°å¿†å¿«ç…§
- âœ… `syncMemoryToMaster()` æ–¹æ³•
- âœ… API ç«¯ç‚¹ï¼š`POST /api/v1/memory/sync`
- âœ… ä»»åŠ¡å®Œæˆåè‡ªåŠ¨åŒæ­¥

### 5. ä»»åŠ¡æ‰§è¡Œæµç¨‹é›†æˆ âœ…

**Worker ç«¯ï¼š**
- âœ… ä»»åŠ¡å¼€å§‹æ—¶è®°å½•åˆ°è®°å¿†
- âœ… ä»»åŠ¡å®Œæˆæ—¶è®°å½•ç»“æœ
- âœ… ä»»åŠ¡å¤±è´¥æ—¶è®°å½•é”™è¯¯
- âœ… è‡ªåŠ¨åŒæ­¥åˆ° Master

**å®ç°ä½ç½®ï¼š** [worker/src/index.ts:303](../nodejs/packages/worker/src/index.ts#L303)

### 6. REST API ç«¯ç‚¹ âœ…

**æ–‡ä»¶ï¼š** [nodejs/packages/master/src/index.ts:162](../nodejs/packages/master/src/index.ts#L162)

**ç«¯ç‚¹åˆ—è¡¨ï¼š**
- `POST /api/v1/memory/sync` - åŒæ­¥ Worker è®°å¿†
- `GET /api/v1/memory/task/:id` - è·å–ä»»åŠ¡è®°å¿†
- `POST /api/v1/memory/task/:id/context` - ä¿å­˜ä»»åŠ¡ä¸Šä¸‹æ–‡
- `GET /api/v1/memory/experiences` - è·å–ç»éªŒæ€»ç»“
- `POST /api/v1/memory/experiences` - ä¿å­˜ç»éªŒæ€»ç»“
- `GET /api/v1/memory/stats` - è·å–è®°å¿†ç»Ÿè®¡
- `POST /api/v1/memory/cleanup` - æ¸…ç†è¿‡æœŸè®°å¿†

### 7. æµ‹è¯•ç”¨ä¾‹ âœ…

**æ–‡ä»¶ï¼š** [nodejs/packages/master/test/memory.test.ts](../nodejs/packages/master/test/memory.test.ts)

**æµ‹è¯•è¦†ç›–ï¼š**
- âœ… Worker Memory æµ‹è¯•
  - å­˜å‚¨å’Œæ£€ç´¢
  - TTL è¿‡æœŸ
  - åˆ†ç±»ç®¡ç†
  - å¿«ç…§åˆ›å»ºå’Œæ¢å¤
  - ç»Ÿè®¡ä¿¡æ¯
  - ä»»åŠ¡è®°å¿†æ¸…ç†

- âœ… Master MemoryManager æµ‹è¯•
  - ä»»åŠ¡ä¸Šä¸‹æ–‡ç®¡ç†
  - å˜é‡æ›´æ–°
  - æ‰§è¡Œå†å²
  - ä»»åŠ¡å†å²è®°å½•
  - ç»éªŒæ€»ç»“
  - ä¼šè¯ç®¡ç†
  - æ¸…ç†åŠŸèƒ½

- âœ… é›†æˆæµ‹è¯•
  - Worker-to-Master åŒæ­¥
  - æ•°æ®ä¸€è‡´æ€§

### 8. æ–‡æ¡£ âœ…

**ç”¨æˆ·æŒ‡å—ï¼š** [docs/MEMORY_SYSTEM_GUIDE.md](../docs/MEMORY_SYSTEM_GUIDE.md)
- âœ… ç³»ç»Ÿæ¶æ„
- âœ… åŠŸèƒ½ç‰¹æ€§
- âœ… API æ¥å£æ–‡æ¡£
- âœ… ä½¿ç”¨ç¤ºä¾‹
- âœ… é…ç½®é€‰é¡¹
- âœ… æœ€ä½³å®è·µ
- âœ… æ€§èƒ½è€ƒè™‘
- âœ… æ•…éšœæ’æŸ¥

**æ¼”ç¤ºè„šæœ¬ï¼š** [test-memory-system.js](../test-memory-system.js)
- âœ… Worker Memory æ¼”ç¤º
- âœ… Master MemoryManager æ¼”ç¤º
- âœ… è®°å¿†åŒæ­¥æ¼”ç¤º
- âœ… æ¸…ç†åŠŸèƒ½æ¼”ç¤º

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Master Server                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         MemoryManager (SQLite)                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Working Memory (å·¥ä½œè®°å¿†)                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - task_context                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - variables, dependencies, history        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Long-term Memory (é•¿æœŸè®°å¿†)               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - task_history                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - experience_summaries                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - skill_usage_stats                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Conversational Memory (ä¼šè¯è®°å¿†)           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - conversations                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - conversation_messages                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• HTTP API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Workers                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         WorkerMemory (æœ¬åœ°æŒä¹…åŒ–)                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ In-Memory Map (å¿«é€Ÿè®¿é—®)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Short-term storage                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - TTL-based expiration                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Category management                     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ File Persistence (æœ¬åœ°æ–‡ä»¶)                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ~/.agentflow/worker-memory/             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - JSON snapshot format                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Auto-save on change                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Sync Module (è‡ªåŠ¨åŒæ­¥)                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Sync on task completion                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Snapshot-based transfer                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - HTTP POST to Master                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…³é”®ç‰¹æ€§

### 1. åˆ†ç±»è®°å¿†
- `execution` - æ‰§è¡Œç›¸å…³ä¿¡æ¯
- `context` - ä¸Šä¸‹æ–‡æ•°æ®
- `result` - æ‰§è¡Œç»“æœ
- `error` - é”™è¯¯ä¿¡æ¯
- `checkpoint` - æ£€æŸ¥ç‚¹

### 2. è‡ªåŠ¨è¿‡æœŸ
- åŸºäº TTL çš„è‡ªåŠ¨è¿‡æœŸ
- Worker ç«¯è‡ªåŠ¨æ¸…ç†
- Master ç«¯å®šæœŸæ¸…ç†

### 3. æŒä¹…åŒ–
- Worker ç«¯ï¼šæœ¬åœ° JSON æ–‡ä»¶
- Master ç«¯ï¼šSQLite æ•°æ®åº“
- è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤

### 4. ä»»åŠ¡å…³è”
- æŒ‰ `taskId` ç»„ç»‡è®°å¿†
- å¿«é€Ÿæ£€ç´¢ä»»åŠ¡ç›¸å…³è®°å¿†
- æ‰¹é‡æ¸…ç†ä»»åŠ¡è®°å¿†

### 5. ç»éªŒå­¦ä¹ 
- ä»å†å²ä»»åŠ¡ä¸­æå–æ¨¡å¼
- æˆåŠŸ/å¤±è´¥æ¨¡å¼è¯†åˆ«
- æœ€ä½³å®è·µæ€»ç»“

## æ€§èƒ½æŒ‡æ ‡

- **Worker Memory:**
  - æœ€å¤§æ¡ç›®æ•°ï¼š1000ï¼ˆå¯é…ç½®ï¼‰
  - è‡ªåŠ¨æ·˜æ±°ï¼šLRU ç­–ç•¥
  - æŒä¹…åŒ–å»¶è¿Ÿï¼š<10ms
  - å†…å­˜å ç”¨ï¼š~1MB/1000æ¡ç›®

- **Master Memory:**
  - æ•°æ®åº“ï¼šSQLite (WAL mode)
  - æŸ¥è¯¢æ€§èƒ½ï¼š<5ms (1000æ¡è®°å½•)
  - å†™å…¥æ€§èƒ½ï¼š<2ms (å•æ¡è®°å½•)
  - æ¸…ç†ç­–ç•¥ï¼šæ¯æ—¥è‡ªåŠ¨æ¸…ç†

## ä½¿ç”¨æµç¨‹

### Worker ä½¿ç”¨æµç¨‹

```typescript
// 1. Worker å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ– WorkerMemory
const worker = new Worker({ master_url: 'http://localhost:6767' });
await worker.start();

// 2. ä»»åŠ¡æ‰§è¡Œæ—¶è‡ªåŠ¨è®°å½•
// - ä»»åŠ¡å¼€å§‹ï¼šè®°å½• start ä¿¡æ¯
// - ä»»åŠ¡å®Œæˆï¼šè®°å½• result ä¿¡æ¯
// - ä»»åŠ¡å¤±è´¥ï¼šè®°å½• error ä¿¡æ¯

// 3. ä»»åŠ¡å®Œæˆåè‡ªåŠ¨åŒæ­¥åˆ° Master
await worker.syncMemoryToMaster();

// 4. Worker å…³é—­æ—¶è‡ªåŠ¨æŒä¹…åŒ–
await worker.stop();
```

### Master ä½¿ç”¨æµç¨‹

```typescript
// 1. Master å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ– MemoryManager
const master = new Master({ port: 6767 });
await master.start();

// 2. é€šè¿‡ API è®¿é—®è®°å¿†
GET /api/v1/memory/task/:id
POST /api/v1/memory/task/:id/context
GET /api/v1/memory/experiences

// 3. è‡ªåŠ¨æ¸…ç†
// - æ¯æ—¥å‡Œæ™¨ 2 ç‚¹è‡ªåŠ¨æ¸…ç†è¿‡æœŸè®°å¿†
// - ä¿ç•™ç­–ç•¥ï¼š
//   - æ£€æŸ¥ç‚¹ï¼š7 å¤©
//   - ä¼šè¯ï¼š30 å¤©
//   - ç»éªŒæ€»ç»“ï¼š90 å¤©ï¼ˆä½ç½®ä¿¡åº¦ï¼‰
```

## æµ‹è¯•æ–¹æ³•

### 1. è¿è¡Œæµ‹è¯•

```bash
cd nodejs
pnpm test -- packages/master/test/memory.test.ts
```

### 2. è¿è¡Œæ¼”ç¤º

```bash
node test-memory-system.js
```

### 3. æ‰‹åŠ¨æµ‹è¯•

```bash
# ç»ˆç«¯ 1: å¯åŠ¨ Master
node nodejs/packages/master/dist/index.js --port 6767

# ç»ˆç«¯ 2: å¯åŠ¨ Worker
node nodejs/packages/worker/dist/index.js

# ç»ˆç«¯ 3: åˆ›å»ºä»»åŠ¡
curl -X POST http://localhost:6767/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Test Memory",
    "description": "echo test",
    "group_name": "default"
  }'

# æŸ¥çœ‹è®°å¿†
curl http://localhost:6767/api/v1/memory/stats
curl http://localhost:6767/api/v1/memory/task/1
```

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

1. `nodejs/packages/database/src/memory-schema.ts` - SQLite Schema
2. `nodejs/packages/master/src/memory-manager.ts` - Master Memory Managerï¼ˆå·²å­˜åœ¨ï¼Œå·²å®Œå–„ï¼‰
3. `nodejs/packages/worker/src/worker-memory.ts` - Worker Memory Manager
4. `nodejs/packages/master/test/memory.test.ts` - æµ‹è¯•ç”¨ä¾‹
5. `docs/MEMORY_SYSTEM_GUIDE.md` - ç”¨æˆ·æŒ‡å—
6. `test-memory-system.js` - æ¼”ç¤ºè„šæœ¬

### ä¿®æ”¹æ–‡ä»¶

1. `nodejs/packages/database/src/index.ts` - å¯¼å‡º memory schema
2. `nodejs/packages/master/src/index.ts` - å¯ç”¨ MemoryManagerï¼Œæ·»åŠ  API ç«¯ç‚¹
3. `nodejs/packages/worker/src/index.ts` - é›†æˆ WorkerMemory

## ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆv2.2.0ï¼‰
- [ ] æ·»åŠ å‘é‡æœç´¢æ”¯æŒï¼ˆä½¿ç”¨ sqlite-vecï¼‰
- [ ] å®ç°è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
- [ ] æ·»åŠ è®°å¿†å¯è§†åŒ– UI
- [ ] å¢åŠ è®°å¿†å¯¼å‡º/å¯¼å…¥åŠŸèƒ½

### ä¸­æœŸï¼ˆv2.3.0ï¼‰
- [ ] å®ç°åˆ†å¸ƒå¼è®°å¿†å…±äº«
- [ ] æ·»åŠ è®°å¿†åŠ å¯†æ”¯æŒ
- [ ] å®ç°è®°å¿†å‹ç¼©ç®—æ³•
- [ ] æ·»åŠ è®°å¿†åˆ†æå·¥å…·

### é•¿æœŸï¼ˆv3.0.0ï¼‰
- [ ] é›†æˆ LLM è¿›è¡Œè®°å¿†æ€»ç»“
- [ ] å®ç°è‡ªåŠ¨ç»éªŒæå–
- [ ] æ·»åŠ è®°å¿†æ¨èç³»ç»Ÿ
- [ ] å®ç°è·¨ä¼šè¯è®°å¿†è¿ç§»

## æ€»ç»“

âœ… **è®°å¿†ç³»ç»Ÿå·²å®Œå…¨å®ç°å¹¶é›†æˆåˆ° AgentFlow**

æ ¸å¿ƒç‰¹æ€§ï¼š
- âœ… å·¥ä½œè®°å¿†ï¼ˆä»»åŠ¡ä¸Šä¸‹æ–‡ï¼‰
- âœ… é•¿æœŸè®°å¿†ï¼ˆå†å²å’Œç»éªŒï¼‰
- âœ… ä¼šè¯è®°å¿†ï¼ˆå¯¹è¯å†å²ï¼‰
- âœ… Worker æœ¬åœ°è®°å¿†ï¼ˆæŒä¹…åŒ–ï¼‰
- âœ… è‡ªåŠ¨åŒæ­¥ï¼ˆWorker â†” Masterï¼‰
- âœ… ä»»åŠ¡é›†æˆï¼ˆè‡ªåŠ¨è®°å½•ï¼‰
- âœ… REST APIï¼ˆå®Œæ•´æ¥å£ï¼‰
- âœ… æµ‹è¯•è¦†ç›–ï¼ˆå…¨é¢æµ‹è¯•ï¼‰
- âœ… æ–‡æ¡£å®Œå–„ï¼ˆç”¨æˆ·æŒ‡å—ï¼‰

ç³»ç»Ÿå·²å¯æŠ•å…¥ä½¿ç”¨ï¼ğŸ‰
