# Agent ä»»åŠ¡å‡çº§æœºåˆ¶ - è§£å†³å¤š Agent åä½œå†²çª

## ğŸ¯ æ ¸å¿ƒç†å¿µ

**Agent ä»»åŠ¡å‡çº§æœºåˆ¶**æ˜¯ AgentFlow è§£å†³å¤š Agent åä½œå†²çªçš„å…³é”®è®¾è®¡ã€‚

### ä¼ ç»Ÿé—®é¢˜

åœ¨ä¼ ç»Ÿå¤š Agent å¹¶è¡Œå¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä»¥ä¸‹å†²çªï¼š

1. **æ–‡ä»¶ä¿®æ”¹å†²çª** - å¤šä¸ª Agent åŒæ—¶ä¿®æ”¹åŒä¸€æ–‡ä»¶
2. **é€»è¾‘å†²çª** - ä¸åŒ Agent çš„ä¿®æ”¹ç›¸äº’çŸ›ç›¾
3. **ä¾èµ–å†²çª** - Agent A çš„ä¿®æ”¹ä¾èµ– Agent B çš„ä¿®æ”¹
4. **ç‰ˆæœ¬å†²çª** - Git åˆå¹¶æ—¶çš„ä»£ç å†²çª

### AgentFlow çš„è§£å†³æ–¹æ¡ˆ

#### ğŸ”„ ä¸‰çº§ä»»åŠ¡å‡çº§æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   1. ä»»åŠ¡åˆ›å»ºé˜¶æ®µ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              2. Agent åˆ†é…ä¸åˆ†æ”¯éš”ç¦»                   â”‚
â”‚  - æ¯ä¸ª Agent åˆ†é…ç‹¬ç«‹åˆ†æ”¯                       â”‚
â”‚  - agent-{id}/task-{id}                           â”‚
â”‚  - ä¾‹å¦‚: agent-frontend/task-TASK-001               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              3. æ–‡ä»¶è¾¹ç•Œå’Œé”å®š                        â”‚
â”‚  - æ£€æŸ¥ Agent æ˜¯å¦æœ‰æƒé™è®¿é—®æ–‡ä»¶                   â”‚
â”‚  - è·å–æ–‡ä»¶é”ï¼ˆå†™æ“ä½œéœ€è¦ï¼‰                       â”‚
â”‚  - å†²çªæ£€æµ‹å’Œé˜»æ­¢                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 4. Agent æ‰§è¡Œé˜¶æ®µ                      â”‚
â”‚  - Agent åœ¨ç‹¬ç«‹åˆ†æ”¯ä¸Šå·¥ä½œ                          â”‚
â”‚  - æ‰€æœ‰ä¿®æ”¹è‡ªåŠ¨æäº¤åˆ°åˆ†æ”¯                          â”‚
â”‚  - å…¶ä»– Agent æ— æ³•çœ‹åˆ°æœªå®Œæˆçš„ä¿®æ”¹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                5. ä»»åŠ¡å®Œæˆé˜¶æ®µ                        â”‚
â”‚  - Agent å®Œæˆä»»åŠ¡åæäº¤ Pull Request                â”‚
â”‚  - åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼ˆä½¿ç”¨ git merge/squash/rebaseï¼‰    â”‚
â”‚  - å¦‚æœæ£€æµ‹åˆ°å†²çªï¼Œè§¦å‘å‡çº§æœºåˆ¶                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              6. å‡çº§æœºåˆ¶å¤„ç†å†²çª                      â”‚
â”‚  âš ï¸ æ£€æµ‹åˆ°å†²çª â†’ è§¦å‘å‡çº§                          â”‚
â”‚  â”œâ”€ çº§åˆ« 1: è‡ªåŠ¨é‡è¯•                                  â”‚
â”‚  â”œâ”€ çº§åˆ« 2: åˆ›å»ºå‡çº§ä»»åŠ¡ï¼ˆå«å†²çªè§£å†³ï¼‰              â”‚
â”‚  â””â”€ çº§åˆ« 3: äººå·¥ä»‹å…¥                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å‡çº§æœºåˆ¶è¯¦è§£

### çº§åˆ« 1: è‡ªåŠ¨é‡è¯•ï¼ˆé€æ˜ï¼‰

**åœºæ™¯**: ç®€å•çš„æ–‡ä»¶çº§å†²çª

**å¤„ç†æ–¹å¼**:
```python
# Agent Frontend å°è¯•åˆå¹¶
result = manager.complete_agent_task("frontend", "TASK-001")

if result['status'] == 'conflict':
    # ç³»ç»Ÿè‡ªåŠ¨é‡è¯•
    time.sleep(2)
    result = manager.complete_agent_task("frontend", "TASK-001")
    # æˆåŠŸ âœ…
```

**é€‚ç”¨åœºæ™¯**:
- Git å¿«è¿›è¿›è‡ªåŠ¨åˆå¹¶
- æ–‡ä»¶å†…å®¹ä¸é‡å 
- ç®€å•çš„æ ¼å¼åŒ–å†²çª

---

### çº§åˆ« 2: åˆ›å»ºå‡çº§ä»»åŠ¡ï¼ˆåŠè‡ªåŠ¨ï¼‰

**åœºæ™¯**: å¤æ‚é€»è¾‘å†²çªï¼Œéœ€è¦æ™ºèƒ½è§£å†³

**å¤„ç†æ–¹å¼**:
```python
# æ£€æµ‹åˆ°å†²çª
if result['status'] == 'conflict':
    # åˆ›å»ºå‡çº§ä»»åŠ¡ï¼Œä¼˜å…ˆçº§æ›´é«˜
    upgrade_task_id = create_upgrade_task(
        original_task_id="TASK-001",
        agent_id="frontend",
        conflicts=result['conflicts'],
        upgrade_type="auto_resolve"  # auto_resolve | manual_resolve
    )

    # å‡çº§ä»»åŠ¡ç”±ä¸“é—¨çš„ Agent æˆ–äººå·¥å¤„ç†
    # åŸä»»åŠ¡æ ‡è®°ä¸º "blocked"
```

**å‡çº§ä»»åŠ¡ç‰¹ç‚¹**:
- **æ›´é«˜ä¼˜å…ˆçº§** - ä¼˜å…ˆäºæ™®é€šä»»åŠ¡
- **åŒ…å«å†²çªä¿¡æ¯** - è¯¦ç»†çš„å†²çªæè¿°
- **è§£å†³ç­–ç•¥** - è‡ªåŠ¨æˆ–æ‰‹åŠ¨è§£å†³
- **ä¸Šä¸‹æ–‡ä¸°å¯Œ** - åŒ…å«åŸå§‹ä»»åŠ¡å’Œå†²çªæ–‡ä»¶

---

### çº§åˆ« 3: äººå·¥ä»‹å…¥ï¼ˆç»ˆææ–¹æ¡ˆï¼‰

**åœºæ™¯**: æ— æ³•è‡ªåŠ¨è§£å†³çš„è¯­ä¹‰å†²çª

**å¤„ç†æ–¹å¼**:
```python
# æ ‡è®°ä»»åŠ¡éœ€è¦äººå·¥è§£å†³
mark_task_needs_manual_resolution("TASK-001", conflicts)

# é€šçŸ¥ç›¸å…³äººå‘˜
notify_developers(
    task_id="TASK-001",
    conflicts=result['conflicts'],
    message="ä»»åŠ¡éœ€è¦äººå·¥è§£å†³å†²çª"
)
```

**é€‚ç”¨åœºæ™¯**:
- ä¸šåŠ¡é€»è¾‘å†²çª
- API è®¾è®¡åˆ†æ­§
- æ¶æ„çº§ä¸å…¼å®¹

---

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¤ºä¾‹

### åœºæ™¯: ä¸¤ä¸ª Agent åŒæ—¶ä¿®æ”¹å…±äº« API

```
æ—¶é—´çº¿:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T0: åˆ›å»ºä»»åŠ¡
  - TASK-001 (Frontend): ä¿®æ”¹ç”¨æˆ· API æ¥å£
  - TASK-002 (Backend): ä¿®æ”¹ç”¨æˆ· API æ¥å£

T1: Agent åˆ†é…
  - Agent-Frontend â†’ åˆ†æ”¯ agent-frontend/task-TASK-001
  - Agent-Backend  â†’ åˆ†æ”¯ agent-backend/task-TASK-002

T2: å¹¶è¡Œå¼€å‘ï¼ˆéš”ç¦»ï¼‰
  - Agent-Frontend åœ¨ src/api/user.ts æ·»åŠ æ–°å­—æ®µ
  - Agent-Backend ä¿®æ”¹ src/api/user.ts çš„éªŒè¯é€»è¾‘
  - âœ… ä¸¤ä¸ª Agent åœ¨ç‹¬ç«‹åˆ†æ”¯ï¼Œäº’ä¸å¹²æ‰°ï¼

T3: Agent-Frontend å…ˆå®Œæˆï¼Œå°è¯•åˆå¹¶
  - å°è¯•åˆå¹¶åˆ° main
  - âš ï¸ æ£€æµ‹åˆ°å†²çªï¼ˆBackend ä¹Ÿä¿®æ”¹äº†åŒä¸€æ–‡ä»¶ï¼‰
  - ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºå‡çº§ä»»åŠ¡: TASK-003 (upgrade)
  - åŸä»»åŠ¡ TASK-001 æ ‡è®°ä¸º "blocked"

T4: å‡çº§ä»»åŠ¡å¤„ç†
  - TASK-003 è·å–ä¸¤ä¸ªä»»åŠ¡çš„ä¿®æ”¹å†…å®¹
  - æ£€æµ‹åˆ°ä¿®æ”¹çš„æ˜¯ä¸åŒéƒ¨åˆ†ï¼ˆFrontend æ·»åŠ å­—æ®µï¼ŒBackend ä¿®æ”¹éªŒè¯ï¼‰
  - âœ… è‡ªåŠ¨åˆå¹¶ä¸¤ä¸ªä¿®æ”¹
  - TASK-001 å’Œ TASK-002 éƒ½æ ‡è®°ä¸º "completed"

T5: ä»»åŠ¡å®Œæˆ âœ…
```

---

## ğŸ”§ å®ç°ä»£ç ç¤ºä¾‹

### Python ç‰ˆæœ¬

```python
from agentflow.git_integration import GitIntegrationManager

manager = GitIntegrationManager(".", ".agentflow/boundaries.json")

# Agent å®Œæˆä»»åŠ¡ï¼ˆè‡ªåŠ¨å¤„ç†å†²çªï¼‰
def agent_complete_task_with_upgrade(agent_id, task_id):
    max_retries = 3
    retry_count = 0

    while retry_count < max_retries:
        # å°è¯•å®Œæˆä»»åŠ¡
        result = manager.complete_agent_task(
            agent_id=agent_id,
            task_id=task_id,
            merge_strategy="squash"
        )

        if result['status'] == 'completed':
            return result

        elif result['status'] == 'conflict':
            retry_count += 1

            if retry_count < max_retries:
                print(f"âš ï¸ æ£€æµ‹åˆ°å†²çªï¼Œè‡ªåŠ¨é‡è¯• ({retry_count}/{max_retries})...")
                time.sleep(2)
                continue

            # è¶…è¿‡é‡è¯•æ¬¡æ•°ï¼Œåˆ›å»ºå‡çº§ä»»åŠ¡
            print(f"ğŸ”° å†²çªæ— æ³•è‡ªåŠ¨è§£å†³ï¼Œåˆ›å»ºå‡çº§ä»»åŠ¡...")
            upgrade_task_id = create_upgrade_task(
                original_task_id=task_id,
                agent_id=agent_id,
                conflicts=result['conflicts']
            )

            return {
                'status': 'upgraded',
                'upgrade_task_id': upgrade_task_id,
                'message': f'ä»»åŠ¡å·²å‡çº§: {task_id} â†’ {upgrade_task_id}'
            }

        else:
            return result

# åˆ›å»ºå‡çº§ä»»åŠ¡
def create_upgrade_task(original_task_id, agent_id, conflicts):
    upgrade_task_id = f"UPGRADE-{original_task_id}"
    branch_name = f"upgrade-{agent_id}/{upgrade_task_id}"

    # åˆ›å»ºå‡çº§ä»»åŠ¡
    task = manager.create_agent_task(
        agent_id="agent-upgrader",  # ä¸“é—¨çš„å‡çº§ Agent
        task_id=upgrade_task_id,
        description=f"""
è§£å†³ä»»åŠ¡ {original_task_id} çš„åˆå¹¶å†²çª

å†²çªæ–‡ä»¶:
{', '.join(conflicts['conflicts'])}

éœ€è¦:
1. åˆ†æä¸¤ä¸ªä»»åŠ¡çš„ä¿®æ”¹å†…å®¹
2. è¯†åˆ«å†²çªç‚¹
3. æ™ºèƒ½åˆå¹¶ä¿®æ”¹
4. ç¡®ä¿ä¸ä¸¢å¤±ä»»ä½•ä¿®æ”¹
"""
    )

    return upgrade_task_id
```

### Go ç‰ˆæœ¬

```go
package main

import (
    "context"
    "fmt"
    "github.com/jiangxiaolong/agentflow-go/internal/git"
)

func CompleteTaskWithUpgrade(
    manager *git.GitIntegrationManager,
    agentID, taskID string,
) (map[string]interface{}, error) {
    maxRetries := 3

    for i := 0; i < maxRetries; i++ {
        // å°è¯•å®Œæˆä»»åŠ¡
        result, err := manager.CompleteAgentTask(
            context.Background(),
            agentID,
            taskID,
            "squash",
        )

        if err != nil {
            return nil, err
        }

        if result["status"] == "completed" {
            return result, nil
        }

        if result["status"] == "conflict" {
            if i < maxRetries-1 {
                // é‡è¯•
                continue
            }

            // åˆ›å»ºå‡çº§ä»»åŠ¡
            upgradeTaskID, err := createUpgradeTask(
                taskID,
                agentID,
                result["conflicts"].([]string),
            )

            if err != nil {
                return nil, err
            }

            return map[string]interface{}{
                "status":           "upgraded",
                "upgrade_task_id": upgradeTaskID,
                "original_task_id":  taskID,
                "message":          fmt.Sprintf("ä»»åŠ¡å·²å‡çº§: %s â†’ %s", taskID, upgradeTaskID),
            }, nil
        }
    }

    return nil, fmt.Errorf("ä»»åŠ¡å®Œæˆå¤±è´¥")
}

func createUpgradeTask(originalTaskID, agentID string, conflicts []string) (string, error) {
    // å®ç°å‡çº§ä»»åŠ¡åˆ›å»ºé€»è¾‘
    upgradeTaskID := fmt.Sprintf("UPGRADE-%s", originalTaskID)

    // åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå‡çº§ä»»åŠ¡è®°å½•
    // ...

    return upgradeTaskID, nil
}
```

---

## ğŸ¯ å…³é”®ä¼˜åŠ¿

### 1. **é›¶ä¸­æ–­å¹¶è¡Œå¼€å‘**
- âœ… Agent å¯ä»¥ç»§ç»­å·¥ä½œï¼Œæ— éœ€ç­‰å¾…å…¶ä»– Agent
- âœ… å†²çªè‡ªåŠ¨æ£€æµ‹å’Œè§£å†³
- âœ… ä¸ä¼šé˜»å¡æ•´ä¸ªå¼€å‘æµç¨‹

### 2. **æ™ºèƒ½å†²çªè§£å†³**
- âœ… ç®€å•å†²çªè‡ªåŠ¨è§£å†³
- âœ… å¤æ‚å†²çªå‡çº§å¤„ç†
- âœ… ä¿ç•™æ‰€æœ‰ Agent çš„ä¿®æ”¹

### 3. **å¯è¿½æº¯æ€§**
- âœ… æ‰€æœ‰ä»»åŠ¡å’Œå‡çº§éƒ½æœ‰å®Œæ•´è®°å½•
- âœ… Git å†å²ä¿ç•™æ‰€æœ‰ä¿®æ”¹
- âœ… å†²çªå’Œè§£å†³è¿‡ç¨‹å¯å®¡è®¡

### 4. **çµæ´»çš„æ§åˆ¶**
- âœ… å¯é…ç½®é‡è¯•æ¬¡æ•°
- âœ… å¯é€‰æ‹©åˆå¹¶ç­–ç•¥
- âœ… å¯å¯ç”¨/ç¦ç”¨è‡ªåŠ¨å‡çº§

---

## ğŸ“Š å‡çº§ä»»åŠ¡ç¤ºä¾‹

### ç¤ºä¾‹ 1: è‡ªåŠ¨åˆå¹¶æˆåŠŸ

```python
# åŸä»»åŠ¡
TASK-001 (Frontend): æ·»åŠ å­—æ®µåˆ° user.ts
  - åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ  email: string

TASK-002 (Backend): ä¿®æ”¹ user.ts çš„éªŒè¯å‡½æ•°
  - ä¿®æ”¹ validateUser() å‡½æ•°

# å‡çº§ä»»åŠ¡
TASK-003 (Upgrade): åˆå¹¶ TASK-001 å’Œ TASK-002
  - æ£€æµ‹ä¸¤ä¸ªä¿®æ”¹ä¸å†²çª
  - è‡ªåŠ¨åˆå¹¶åˆ°ä¸€èµ·
  - âœ… TASK-001, TASK-002, TASK-003 éƒ½å®Œæˆ
```

### ç¤ºä¾‹ 2: éœ€è¦æ‰‹åŠ¨è§£å†³

```python
# åŸä»»åŠ¡
TASK-001 (Frontend): é‡æ„ User æ¥å£
  - å¤§è§„æ¨¡ä¿®æ”¹ src/api/user.ts

TASK-002 (Backend): é‡æ„ User æ¥å£
  - ä¹Ÿå¤§è§„æ¨¡ä¿®æ”¹ src/api/user.ts

# å‡çº§ä»»åŠ¡
TASK-003 (Upgrade): æ‰‹åŠ¨è§£å†³å†²çª
  - æ ‡è®° TASK-001 å’Œ TASK-002 ä¸º "needs_manual_resolution"
  - é€šçŸ¥å¼€å‘äººå‘˜
  - æä¾›å†²çªè¯¦æƒ…å’Œè§£å†³å»ºè®®
  - ç­‰å¾…äººå·¥è§£å†³
```

---

## ğŸ”§ é…ç½®å‡çº§è¡Œä¸º

### Python ç‰ˆæœ¬é…ç½®

```python
# åœ¨ GitIntegrationManager åˆå§‹åŒ–æ—¶é…ç½®
manager = GitIntegrationManager(
    repo_path=".",
    boundary_config=".agentflow/boundaries.json"
)

# é…ç½®å‡çº§ç­–ç•¥ï¼ˆä¼ªä»£ç ï¼‰
manager.upgrade_config = {
    "max_retries": 3,              # æœ€å¤§é‡è¯•æ¬¡æ•°
    "auto_upgrade_enabled": True,   # æ˜¯å¦å¯ç”¨è‡ªåŠ¨å‡çº§
    "upgrade_agent": "agent-upgrader",  # å¤„ç†å‡çº§ä»»åŠ¡çš„ Agent
    "manual_notification": True,     # æ˜¯å¦å‘é€é€šçŸ¥
}
```

### Go ç‰ˆæœ¬é…ç½®

```go
// åœ¨é…ç½®æ–‡ä»¶æˆ–åˆå§‹åŒ–æ—¶é…ç½®
type UpgradeConfig struct {
    MaxRetries           int    `json:"max_retries" default:"3"`
    AutoUpgradeEnabled    bool   `json:"auto_upgrade_enabled" default:"true"`
    UpgradeAgentID       string `json:"upgrade_agent_id" default:"agent-upgrader"`
    ManualNotification  bool   `json:"manual_notification" default:"true"`
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. **ä»»åŠ¡ç²’åº¦æ§åˆ¶**
- âœ… ä¿æŒä»»åŠ¡è¶³å¤Ÿå°ï¼Œå‡å°‘å†²çªæ¦‚ç‡
- âœ… ä¸€ä¸ªä»»åŠ¡ä¿®æ”¹çš„æ–‡ä»¶æ•°é‡ â‰¤ 5
- âœ… ä¸€ä¸ªä»»åŠ¡ä¿®æ”¹çš„è¡Œæ•° â‰¤ 100

### 2. **æ–‡ä»¶è¾¹ç•Œè®¾è®¡**
- âœ… ä½¿ç”¨ exclusive è¾¹ç•Œå‡å°‘å…±äº«åŒºåŸŸ
- âœ… å…±äº«åŒºåŸŸä½¿ç”¨ shared + æ–‡ä»¶é”
- âœ… æ˜ç¡®å®šä¹‰ readonly åŒºåŸŸ

### 3. **åˆå¹¶ç­–ç•¥é€‰æ‹©**
- âœ… ä½¿ç”¨ **squash** åˆå¹¶ç­–ç•¥ï¼ˆæ¨èï¼‰
- ï¿½ squash å¯ä»¥ä¿æŒæäº¤å†å²æ•´æ´
- âœ¾ merge ä¿ç•™æ‰€æœ‰åˆ†æ”¯å†å²ï¼ˆä¾¿äºè°ƒè¯•ï¼‰

### 4. **å‡çº§ä»»åŠ¡è®¾è®¡**
- âœ… å‡çº§ä»»åŠ¡åº”è¯¥æœ‰æ›´é«˜ä¼˜å…ˆçº§
- âœ… åŒ…å«è¯¦ç»†çš„å†²çªä¿¡æ¯
- âœ… æä¾›è§£å†³å»ºè®®å’Œå·¥å…·

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Git é›†æˆå®Œæ•´æŒ‡å—](git-integration-guide.md) - Git é›†æˆè¯¦ç»†è¯´æ˜
- [æ–‡ä»¶è¾¹ç•Œé…ç½®](../.agentflow/boundaries.example.json) - è¾¹ç•Œé…ç½®ç¤ºä¾‹
- [éƒ¨ç½²è„šæœ¬](../scripts/) - ä¸‰å¹³å°å¿«é€Ÿéƒ¨ç½²è„šæœ¬

---

**ç‰ˆæœ¬**: v1.0.0
**æ›´æ–°**: 2026-01-22
**ä½œè€…**: AgentFlow Team
