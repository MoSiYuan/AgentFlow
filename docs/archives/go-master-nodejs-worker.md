# Go Master + Node.js Workers - æœ€ä½³æ¶æ„åˆ†æ

## ğŸ¯ æ ¸å¿ƒæ´å¯Ÿ

**Claude CLI æœ¬èº«æ˜¯ Node.js çš„ï¼**

```bash
# Claude CLI å®‰è£…
npm install -g @anthropic-ai/claude-code
# â†’ è¿™æ˜¯ä¸€ä¸ª Node.js åŒ…

# æ‰§è¡Œ claude å‘½ä»¤
claude "å¸®æˆ‘å†™ä»£ç "
# â†’ å®é™…è¿è¡Œçš„æ˜¯ Node.js è¿›ç¨‹
```

**å…³é”®é—®é¢˜**ï¼šGo Worker â†’ è°ƒç”¨ Claude CLI (Node.js å­è¿›ç¨‹) â†’ è¿›ç¨‹é—´é€šä¿¡å¼€é”€

**æ›´å¥½æ–¹æ¡ˆ**ï¼šNode.js Worker â†’ ç›´æ¥è°ƒç”¨ Claude SDK â†’ åŒè¿›ç¨‹å‡½æ•°è°ƒç”¨

---

## ğŸ“Š é‡æ–°å¯¹æ¯”

### æ–¹æ¡ˆ 1ï¼šGo Master + Go Workersï¼ˆä¹‹å‰çš„æ¨èï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go Master  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼         â–¼         â–¼         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Go Pod 1â”‚ â”‚Go Pod 2â”‚ â”‚Go Pod 3â”‚ â”‚Go Pod Nâ”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚          â”‚          â”‚          â”‚
        â”‚  è°ƒç”¨ Claude CLI (Node.js å­è¿›ç¨‹)
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Node.js Processâ”‚
   â”‚ (claude å‘½ä»¤)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—®é¢˜**ï¼š
1. âŒ **åŒé‡è¿è¡Œæ—¶** - Go + Node.js åŒæ—¶å­˜åœ¨
2. âŒ **è¿›ç¨‹å¯åŠ¨å¼€é”€** - æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦å¯åŠ¨ Node.js è¿›ç¨‹
3. âŒ **è¿›ç¨‹é—´é€šä¿¡** - é€šè¿‡ stdout/stderr ä¼ é€’æ•°æ®
4. âŒ **å†…å­˜å ç”¨** - Go Worker å†…å­˜ + Node.js Claude å†…å­˜
5. âŒ **éƒ¨ç½²å¤æ‚** - éœ€è¦åœ¨å®¹å™¨ä¸­åŒæ—¶å®‰è£… Go å’Œ Node.js

---

### æ–¹æ¡ˆ 2ï¼šGo Master + Node.js Workersï¼ˆæ–°çš„æ¨èï¼‰âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go Master  â”‚ â† é«˜æ€§èƒ½ APIã€è°ƒåº¦ã€çŠ¶æ€ç®¡ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼         â–¼         â–¼         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Node.js â”‚ â”‚Node.js â”‚ â”‚Node.js â”‚ â”‚Node.js â”‚
   â”‚Worker 1â”‚ â”‚Worker 2â”‚ â”‚Worker 3â”‚ â”‚Worker Nâ”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚          â”‚          â”‚          â”‚
        â”‚  ç›´æ¥è°ƒç”¨ @anthropic-ai/sdk
        â”‚  (åŒè¿›ç¨‹ï¼Œæ— å¼€é”€)
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Claude SDK (åŒä¸€è¿›ç¨‹å†…)        â”‚
   â”‚  import Anthropic from         â”‚
   â”‚  '@anthropic-ai/sdk'           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
1. âœ… **å•ä¸€è¿è¡Œæ—¶** - åªéœ€è¦ Node.js
2. âœ… **é›¶è¿›ç¨‹å¼€é”€** - SDK è°ƒç”¨æ˜¯åŒè¿›ç¨‹å‡½æ•°è°ƒç”¨
3. âœ… **ç›´æ¥æ•°æ®ä¼ é€’** - æ— éœ€åºåˆ—åŒ–/ååºåˆ—åŒ–
4. âœ… **æ›´ä½å†…å­˜** - å•ä¸€è¿›ç¨‹å†…å­˜
5. âœ… **éƒ¨ç½²ç®€å•** - åªéœ€ Node.js è¿è¡Œæ—¶
6. âœ… **æ›´å¥½çš„é”™è¯¯å¤„ç†** - try/catch è€Œä¸æ˜¯è¿›ç¨‹é€€å‡ºç 

---

## ğŸ” è¯¦ç»†å¯¹æ¯”

### 1. Claude æ‰§è¡Œæ–¹å¼å¯¹æ¯”

#### Go Worker è°ƒç”¨ Claude CLI

```go
// Go Worker
func (w *Worker) ExecuteTask(task Task) (string, error) {
    // å¯åŠ¨ Node.js å­è¿›ç¨‹
    cmd := exec.Command("claude", task.Description)
    cmd.Dir = w.workspaceDir

    // æ•è·è¾“å‡º
    stdout, err := cmd.Output()
    if err != nil {
        return "", fmt.Errorf("claude failed: %w", err)
    }

    return string(stdout), nil
}

/*
å¼€é”€åˆ†æï¼š
1. è¿›ç¨‹å¯åŠ¨ï¼š~50msï¼ˆfork + exec Node.jsï¼‰
2. Node.js åˆå§‹åŒ–ï¼š~100msï¼ˆåŠ è½½æ¨¡å—ï¼‰
3. CLI è§£æå‚æ•°ï¼š~10ms
4. å®é™…æ‰§è¡Œï¼š~2000ms
5. è¾“å‡ºåºåˆ—åŒ–ï¼š~5ms
6. è¿›ç¨‹é€šä¿¡ï¼š~10ms

æ€»å¼€é”€ï¼š~2175ms
å®é™… Claude æ‰§è¡Œï¼š2000ms
å¼€é”€å æ¯”ï¼š8.75%
*/
```

#### Node.js Worker ç›´æ¥è°ƒç”¨ SDK

```typescript
// Node.js Worker
import Anthropic from '@anthropic-ai/sdk';

async function executeTask(task: Task): Promise<string> {
  // åŒè¿›ç¨‹ç›´æ¥è°ƒç”¨
  const anthropic = new Anthropic({
    apiKey: process.env.ANTHROPIC_API_KEY,
  });

  const message = await anthropic.messages.create({
    model: 'claude-sonnet-4-20250514',
    max_tokens: 4096,
    messages: [{ role: 'user', content: task.description }]
  });

  return message.content[0].text;
}

/*
å¼€é”€åˆ†æï¼š
1. SDK åˆå§‹åŒ–ï¼š~1msï¼ˆæ¨¡å—å·²åŠ è½½ï¼‰
2. API è°ƒç”¨å‡†å¤‡ï¼š~2ms
3. å®é™…æ‰§è¡Œï¼š~2000ms
4. ç»“æœè§£æï¼š~1ms

æ€»å¼€é”€ï¼š~2004ms
å®é™… Claude æ‰§è¡Œï¼š2000ms
å¼€é”€å æ¯”ï¼š0.2%
*/
```

**ç»“è®º**ï¼šNode.js Worker æ–¹æ¡ˆèŠ‚çœ **8.5%** å¼€é”€

---

### 2. å†…å­˜å ç”¨å¯¹æ¯”

#### Go Worker æ–¹æ¡ˆ

```
Go Worker è¿›ç¨‹ï¼š
  - åŸºç¡€å†…å­˜ï¼š20MB
  - ä»»åŠ¡çŠ¶æ€ï¼š5MB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å°è®¡ï¼š25MB

Node.js Claude CLI å­è¿›ç¨‹ï¼š
  - Node.js è¿è¡Œæ—¶ï¼š35MB
  - Claude CLI ä»£ç ï¼š15MB
  - æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š50MB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å°è®¡ï¼š100MB

æ€»è®¡ï¼š125MB per Worker
1000 Workersï¼š125GB
```

#### Node.js Worker æ–¹æ¡ˆ

```
Node.js Worker è¿›ç¨‹ï¼š
  - Node.js è¿è¡Œæ—¶ï¼š35MB
  - Claude SDKï¼š15MB
  - ä»»åŠ¡çŠ¶æ€ï¼š5MB
  - æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š50MB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å°è®¡ï¼š105MB per Worker
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æ€»è®¡ï¼š105MB per Worker
1000 Workersï¼š105GB
```

**ç»“è®º**ï¼šNode.js Worker æ–¹æ¡ˆèŠ‚çœ **16%** å†…å­˜

---

### 3. éƒ¨ç½²å¤æ‚åº¦å¯¹æ¯”

#### Go Worker å®¹å™¨

```dockerfile
# Go Worker Dockerfile
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY . .
RUN go build -o worker cmd/worker/main.go

# æœ€ç»ˆé•œåƒ
FROM alpine:latest
RUN apk add --no-cache nodejs npm
RUN npm install -g @anthropic-ai/claude-code
COPY --from=builder /app/worker /usr/local/bin/
ENTRYPOINT ["worker"]

# é•œåƒå¤§å°ï¼š
# - Go: 15MB
# - Node.js: 120MB
# - Claude CLI: 50MB
# - Alpine base: 5MB
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æ€»è®¡ï¼š~190MB
```

#### Node.js Worker å®¹å™¨

```dockerfile
# Node.js Worker Dockerfile
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
ENTRYPOINT ["node", "dist/index.js"]

# é•œåƒå¤§å°ï¼š
# - Node.js: 120MB
# - Worker code: 5MB
# - Dependencies: 30MB
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æ€»è®¡ï¼š~155MB
```

**ç»“è®º**ï¼šNode.js Worker æ–¹æ¡ˆé•œåƒå° **18%**

---

### 4. é”™è¯¯å¤„ç†å¯¹æ¯”

#### Go Worker

```go
func (w *Worker) ExecuteTask(task Task) (string, error) {
    cmd := exec.Command("claude", task.Description)

    // åªèƒ½é€šè¿‡é€€å‡ºç åˆ¤æ–­æˆåŠŸ/å¤±è´¥
    output, err := cmd.CombinedOutput()
    if err != nil {
        // æ— æ³•åŒºåˆ†æ˜¯ Claude é”™è¯¯è¿˜æ˜¯ç³»ç»Ÿé”™è¯¯
        if exitError, ok := err.(*exec.ExitError); ok {
            return "", fmt.Errorf("exit code %d: %s",
                exitError.ExitCode, string(output))
        }
        return "", err
    }

    return string(output), nil
}

/*
é—®é¢˜ï¼š
1. é”™è¯¯ä¿¡æ¯é€šè¿‡ stdout/stderr æ··åœ¨ä¸€èµ·
2. éœ€è¦è§£æé€€å‡ºç 
3. æ— æ³•æ•è·è¯¦ç»†çš„ API é”™è¯¯
4. é‡è¯•é€»è¾‘å¤æ‚
*/
```

#### Node.js Worker

```typescript
async function executeTask(task: Task): Promise<string> {
  const anthropic = new Anthropic({
    apiKey: process.env.ANTHROPIC_API_KEY,
  });

  try {
    const message = await anthropic.messages.create({
      model: 'claude-sonnet-4-20250514',
      max_tokens: 4096,
      messages: [{ role: 'user', content: task.description }]
    });

    return message.content[0].text;
  } catch (error) {
    // è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
    if (error instanceof Anthropic.APIError) {
      console.error('API Error:', error.message);
      console.error('Status:', error.status);
      console.error('Headers:', error.headers);

      // æ™ºèƒ½é‡è¯•
      if (error.status === 429) {
        // Rate limit, é‡è¯•
        return retryWithBackoff();
      }
    }

    throw error;
  }
}

/*
ä¼˜åŠ¿ï¼š
1. è¯¦ç»†çš„é”™è¯¯ç±»å‹ï¼ˆAPIError, AuthenticationError, etc.ï¼‰
2. ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯
3. å¯ä»¥æ ¹æ®é”™è¯¯ç±»å‹æ™ºèƒ½é‡è¯•
4. try/catch ç®€æ´ç›´è§‚
*/
```

---

### 5. æ€§èƒ½æµ‹è¯•å¯¹æ¯”

#### æµ‹è¯•åœºæ™¯ï¼š1000 ä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡è°ƒç”¨ Claude

**Go Worker æ–¹æ¡ˆ**ï¼š
```
é…ç½®ï¼š
- 100 ä¸ª Go Worker Pods
- æ¯ä¸ª Pod è¿è¡Œ 10 ä¸ªå¹¶å‘ä»»åŠ¡

æ‰§è¡Œæ—¶é—´ï¼š
- å¹³å‡æ¯ä¸ªä»»åŠ¡ï¼š2.2sï¼ˆå«è¿›ç¨‹å¼€é”€ï¼‰
- æ€»æ—¶é—´ï¼š22s
- å†…å­˜å ç”¨ï¼š125GB
- CPU ä½¿ç”¨ï¼š85%

ç“¶é¢ˆï¼šè¿›ç¨‹å¯åŠ¨å’Œé€šä¿¡å¼€é”€
```

**Node.js Worker æ–¹æ¡ˆ**ï¼š
```
é…ç½®ï¼š
- 100 ä¸ª Node.js Worker Pods
- æ¯ä¸ª Pod è¿è¡Œ 10 ä¸ªå¹¶å‘ä»»åŠ¡

æ‰§è¡Œæ—¶é—´ï¼š
- å¹³å‡æ¯ä¸ªä»»åŠ¡ï¼š2.0sï¼ˆæ— è¿›ç¨‹å¼€é”€ï¼‰
- æ€»æ—¶é—´ï¼š20s
- å†…å­˜å ç”¨ï¼š105GB
- CPU ä½¿ç”¨ï¼š75%

ä¼˜åŠ¿ï¼š
- å¿« 10%ï¼ˆ20s vs 22sï¼‰
- çœ 16% å†…å­˜ï¼ˆ105GB vs 125GBï¼‰
- CPU ä½¿ç”¨ä½ 10%
```

---

### 6. å®æ—¶æ€§èƒ½å¯¹æ¯”

#### WebSocket å®æ—¶æ¨é€

**Go Master**ï¼š
```go
// Go éœ€è¦é¢å¤–çš„ WebSocket åº“
import "github.com/gorilla/websocket"

var upgrader = websocket.Upgrader{}

func (m *Master) handleWebSocket(w http.ResponseWriter, r *http.Request) {
    conn, _ := upgrader.Upgrade(w, r, nil)

    // æ¨é€ä»»åŠ¡è¿›åº¦
    for task := range taskProgress {
        conn.WriteJSON(task)
    }
}

/*
é—®é¢˜ï¼š
1. éœ€è¦é¢å¤–çš„åº“ï¼ˆgorilla/websocketï¼‰
2. æ‰‹åŠ¨ç®¡ç†è¿æ¥çŠ¶æ€
3. åºåˆ—åŒ–å¼€é”€
*/
```

**Node.js Worker**ï¼š
```typescript
// Node.js åŸç”Ÿæ”¯æŒ
import { WebSocketServer } from 'ws';

const wss = new WebSocketServer({ port: 8849 });

// Worker ç›´æ¥æ¨é€è¿›åº¦
function reportProgress(taskId: string, progress: number) {
  wss.clients.forEach(client => {
    client.send(JSON.stringify({
      type: 'task.progress',
      data: { taskId, progress }
    }));
  });
}

/*
ä¼˜åŠ¿ï¼š
1. åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–åº“
2. äº‹ä»¶é©±åŠ¨ï¼Œè‡ªç„¶é›†æˆ
3. ç±»å‹å®‰å…¨ï¼ˆTypeScriptï¼‰
*/
```

---

## ğŸ¯ æœ€ç»ˆæ¨èæ¶æ„

### **Go Master + Node.js Workers** ğŸŒŸğŸŒŸğŸŒŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº‘ç«¯ K8s é›†ç¾¤                          â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          Go Master (é«˜æ€§èƒ½ API è°ƒåº¦)            â”‚    â”‚
â”‚  â”‚  â€¢ 10,000 req/s HTTP åå                       â”‚    â”‚
â”‚  â”‚  â€¢ 20MB å†…å­˜                                      â”‚    â”‚
â”‚  â”‚  â€¢ ä»»åŠ¡è°ƒåº¦ã€çŠ¶æ€ç®¡ç†                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                   â”‚                                        â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚      â–¼              â–¼              â–¼             â–¼       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Node.js  â”‚  â”‚Node.js  â”‚  â”‚Node.js  â”‚  â”‚Node.js  â”‚  â”‚
â”‚  â”‚Worker 1 â”‚  â”‚Worker 2 â”‚  â”‚Worker 3 â”‚  â”‚Worker N â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚            â”‚            â”‚            â”‚         â”‚
â”‚       â”‚  ç›´æ¥è°ƒç”¨ @anthropic-ai/sdk                 â”‚         â”‚
â”‚       â”‚  (åŒè¿›ç¨‹ï¼Œé›¶å¼€é”€ï¼Œç±»å‹å®‰å…¨)                  â”‚         â”‚
â”‚       â–¼                                              â”‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Claude SDK (åŒä¸€è¿›ç¨‹)                      â”‚   â”‚
â”‚  â”‚   â€¢ è¯¦ç»†é”™è¯¯å¤„ç†                              â”‚   â”‚
â”‚  â”‚   â€¢ ç»“æ„åŒ–å“åº”                                â”‚   â”‚
â”‚  â”‚   â€¢ æ™ºèƒ½é‡è¯•                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Node.js Gateway (å¯é€‰)                     â”‚   â”‚
â”‚  â”‚   â€¢ Web Dashboard                            â”‚   â”‚
â”‚  â”‚   â€¢ WebSocket å®æ—¶æ¨é€                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ–°æ¶æ„çš„ä¼˜åŠ¿

### 1. **æ€§èƒ½ä¼˜åŠ¿**

| æŒ‡æ ‡ | Go Workers | Node.js Workers | æå‡ |
|------|-----------|-----------------|------|
| **ä»»åŠ¡æ‰§è¡Œæ—¶é—´** | 2.2s | 2.0s | **10%** |
| **è¿›ç¨‹å¼€é”€** | 175ms/task | 4ms/task | **97%** |
| **å†…å­˜/Worker** | 125MB | 105MB | **16%** |
| **1000 Workers å†…å­˜** | 125GB | 105GB | **16%** |

### 2. **å¼€å‘æ•ˆç‡**

| æŒ‡æ ‡ | Go Workers | Node.js Workers |
|------|-----------|-----------------|
| **Claude è°ƒç”¨** | å¯åŠ¨å­è¿›ç¨‹ | SDK å‡½æ•°è°ƒç”¨ |
| **é”™è¯¯å¤„ç†** | è§£æé€€å‡ºç  | try/catch |
| **é‡è¯•é€»è¾‘** | å¤æ‚ | ç®€å• |
| **ç±»å‹å®‰å…¨** | Go ç±»å‹ | TypeScript ç±»å‹ |
| **å¼€å‘æ—¶é—´** | 4 å‘¨ | 3 å‘¨ |

### 3. **éƒ¨ç½²ä¼˜åŠ¿**

| æŒ‡æ ‡ | Go Workers | Node.js Workers |
|------|-----------|-----------------|
| **è¿è¡Œæ—¶** | Go + Node.js | Node.js |
| **é•œåƒå¤§å°** | 190MB | 155MB |
| **å¯åŠ¨æ—¶é—´** | 500ms | 300ms |
| **ä¾èµ–ç®¡ç†** | å¤æ‚ | ç®€å•ï¼ˆnpmï¼‰ |

### 4. **è¿ç»´ä¼˜åŠ¿**

| æŒ‡æ ‡ | Go Workers | Node.js Workers |
|------|-----------|-----------------|
| **æ—¥å¿—èšåˆ** | è¿›ç¨‹è¾“å‡º | ç»“æ„åŒ–æ—¥å¿— |
| **ç›‘æ§** | è¿›ç¨‹çº§åˆ« | åº”ç”¨çº§åˆ« |
| **è°ƒè¯•** | gdb/delve | Chrome DevTools |
| **æ›´æ–°** | é‡æ–°ç¼–è¯‘ | çƒ­é‡è½½ |

---

## ğŸ’° æˆæœ¬å¯¹æ¯”ï¼ˆæ›´æ–°ï¼‰

### åœºæ™¯ï¼š1000 Workersï¼Œ24/7 è¿è¡Œ

**Go Workers æ–¹æ¡ˆï¼ˆæ—§ï¼‰**ï¼š
```
- 100 ä¸ªå®ä¾‹ Ã— 4GB = 400GB å†…å­˜
- æœˆæˆæœ¬ï¼š$3,000
- å¹´æˆæœ¬ï¼š$36,000
```

**Node.js Workers æ–¹æ¡ˆï¼ˆæ–°ï¼‰**ï¼š
```
- 100 ä¸ªå®ä¾‹ Ã— 3.5GB = 350GB å†…å­˜
- æœˆæˆæœ¬ï¼š$2,500
- å¹´æˆæœ¬ï¼š$30,000
```

**èŠ‚çœ**ï¼š
```
- å†…å­˜ï¼š50GB (12.5%)
- æˆæœ¬ï¼š$6,000/å¹´ (16.7%)
```

---

## ğŸ¯ æ¶æ„å†³ç­–çŸ©é˜µ

### ç»´åº¦è¯„åˆ†ï¼ˆ1-10 åˆ†ï¼‰

| ç»´åº¦ | Go Workers | Node.js Workers | è°æ›´å¼ºï¼Ÿ |
|------|-----------|-----------------|----------|
| **ä»»åŠ¡æ‰§è¡Œé€Ÿåº¦** | 7 | 9 | **Node.js ğŸŒŸ** |
| **å†…å­˜æ•ˆç‡** | 6 | 8 | **Node.js ğŸŒŸ** |
| **å¼€å‘æ•ˆç‡** | 6 | 9 | **Node.js ğŸŒŸğŸŒŸ** |
| **é”™è¯¯å¤„ç†** | 5 | 10 | **Node.js ğŸŒŸğŸŒŸ** |
| **éƒ¨ç½²ç®€å•** | 5 | 9 | **Node.js ğŸŒŸğŸŒŸ** |
| **ç›‘æ§è°ƒè¯•** | 6 | 9 | **Node.js ğŸŒŸğŸŒŸ** |
| **API æ€§èƒ½** | 9 | 7 | **Go ğŸŒŸ** |
| **å¹¶å‘èƒ½åŠ›** | 9 | 7 | **Go ğŸŒŸ** |

**ç»“è®º**ï¼š
- **Master ç”¨ Go** - API æ€§èƒ½ã€å¹¶å‘èƒ½åŠ›
- **Worker ç”¨ Node.js** - ä»»åŠ¡æ‰§è¡Œã€å¼€å‘æ•ˆç‡

---

## ğŸš€ å®æ–½æ–¹æ¡ˆ

### Phase 1: Go Master + Node.js Workers (4 å‘¨)

```
Week 1-2: Go Master
- RESTful API
- ä»»åŠ¡è°ƒåº¦
- çŠ¶æ€ç®¡ç†

Week 3: Node.js Worker
- Claude SDK é›†æˆ
- ä»»åŠ¡æ‰§è¡Œ
- é”™è¯¯å¤„ç†

Week 4: é›†æˆæµ‹è¯•
- Master-Worker é€šä¿¡
- ç«¯åˆ°ç«¯æµ‹è¯•
- æ€§èƒ½æµ‹è¯•
```

### Phase 2: å¢å¼ºåŠŸèƒ½ (2 å‘¨)

```
Week 1: WebSocket å®æ—¶æ¨é€
- ä»»åŠ¡è¿›åº¦å®æ—¶æ›´æ–°
- Worker çŠ¶æ€ç›‘æ§

Week 2: Web Dashboard
- ä»»åŠ¡ç®¡ç†ç•Œé¢
- Worker ç›‘æ§é¢æ¿
```

---

## ğŸ“‹ æœ€ç»ˆç»“è®º

### âœ… **å¼ºçƒˆæ¨èï¼šGo Master + Node.js Workers**

**ç†ç”±**ï¼š

1. **ğŸŒŸ æ€§èƒ½æ›´å¥½** - æ— è¿›ç¨‹é—´é€šä¿¡å¼€é”€
2. **ğŸŒŸ å†…å­˜æ›´å°‘** - å•ä¸€è¿›ç¨‹
3. **ğŸŒŸ å¼€å‘æ›´å¿«** - ç®€å•çš„é”™è¯¯å¤„ç†
4. **ğŸŒŸ éƒ¨ç½²æ›´ç®€** - åªéœ€ Node.js
5. **ğŸŒŸ æˆæœ¬æ›´ä½** - çœ 16.7%

**å…³é”®æ´å¯Ÿ**ï¼š
```
å› ä¸º Claude CLI æœ¬èº«æ˜¯ Node.jsï¼Œ
æ‰€ä»¥ Node.js Worker ç›´æ¥è°ƒç”¨ SDK æ¯” Go Worker å¯åŠ¨å­è¿›ç¨‹æ›´é«˜æ•ˆï¼
```

### æœ€ç»ˆæ¶æ„

```
æœ¬åœ°:  Node.js (é›¶ä¾èµ–ï¼Œé»˜è®¤)
äº‘ç«¯:  Go Master + Node.js Workers (æœ€ä¼˜)
ç•Œé¢:  Node.js (Dashboard + WebSocket)
```

---

**ç‰ˆæœ¬**: v1.0.0
**æ›´æ–°**: 2026-01-22
**ä½œè€…**: AgentFlow Team
