# v0.4.0 æ¶æ„é‡æ„åˆ†æä¸å†³ç­–è®°å½•

**æ—¥æœŸ**: 2026-01-28
**çŠ¶æ€**: éœ€æ±‚åˆ†æå®Œæˆ
**ç±»å‹**: ç³»ç»Ÿçº§æ¶æ„é‡æ„

---

## 1. èƒŒæ™¯ä¸åŠ¨æœº

### 1.1 å½“å‰æ¶æ„é—®é¢˜

**é—®é¢˜ 1: æ•°æ®åˆ†æ•£**
```
~/code/ProjectA/.agentflow/agentflow.db
~/code/ProjectB/.agentflow/agentflow.db
~/code/ProjectC/.agentflow/agentflow.db
```
- æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„æ•°æ®åº“
- æ•°æ®æ— æ³•å…±äº«å’Œç»Ÿä¸€ç®¡ç†
- éš¾ä»¥è·¨é¡¹ç›®æŸ¥è¯¢å’Œåˆ†æ

**é—®é¢˜ 2: éƒ¨ç½²æ–¹å¼**
- ä¾èµ–é¡¹ç›®ç›®å½•ç»“æ„
- æ— æ³•ä½œä¸ºå…¨å±€ CLI å·¥å…·ä½¿ç”¨
- ä¸æ ‡å‡† CLI å·¥å…·ï¼ˆå¦‚ gitã€npmï¼‰ä½¿ç”¨ä¹ æƒ¯ä¸ç¬¦

**é—®é¢˜ 3: é…ç½®ç®¡ç†**
- æ•°æ®å’Œé…ç½®æ··æ‚åœ¨ä¸€èµ·
- åˆ é™¤é¡¹ç›®æ–‡ä»¶å¤¹ä¼šä¸¢å¤±æ‰€æœ‰å†å²æ•°æ®
- æ— æ³•åŒºåˆ†"é¡¹ç›®é…ç½®"å’Œ"è¿è¡Œæ—¶æ•°æ®"

### 1.2 é‡æ„ç›®æ ‡

**æ ¸å¿ƒç›®æ ‡**: å°† AgentFlow ä»"é¡¹ç›®é™„å±å“"å‡çº§ä¸º"ç”¨æˆ·çº§åŸºç¡€è®¾æ–½"

```
å½“å‰çŠ¶æ€:
AgentFlow = é¡¹ç›®ä¾èµ–å·¥å…·
â†“

ç›®æ ‡çŠ¶æ€:
AgentFlow = ç”¨æˆ·çº§ CLI åŸºç¡€è®¾æ–½
```

---

## 2. æ ¸å¿ƒå˜æ›´åˆ†æ

### 2.1 è·¯å¾„è¿ç§» (Phase 1)

#### å½“å‰ç»“æ„
```
~/code/MyProject/
  â””â”€â”€ .agentflow/
      â”œâ”€â”€ agentflow.db         # ä»»åŠ¡æ•°æ®åº“
      â”œâ”€â”€ memory.db            # è®°å¿†æ•°æ®åº“
      â””â”€â”€ logs/                # æ—¥å¿—
```

#### ç›®æ ‡ç»“æ„
```
~/.agentflow/                   # å…¨å±€æ•°æ®ç›®å½•
  â”œâ”€â”€ agentflow.db             # ç»Ÿä¸€ä»»åŠ¡æ•°æ®åº“
  â”œâ”€â”€ memory.db                # ç»Ÿä¸€è®°å¿†æ•°æ®åº“
  â”œâ”€â”€ logs/                    # ç»Ÿä¸€æ—¥å¿—ç›®å½•
  â””â”€â”€ config/
      â””â”€â”€ agentflow.toml       # å…¨å±€é…ç½®

~/code/MyProject/
  â””â”€â”€ .agentflow/
      â””â”€â”€ project.toml         # è½»é‡çº§é¡¹ç›®é…ç½®ï¼ˆä¸å«æ•°æ®åº“ï¼‰
```

#### åˆç†æ€§è¯„ä¼°

âœ… **éå¸¸åˆç†** - ç†ç”±ï¼š

1. **ç¬¦åˆ XDG è§„èŒƒ**
   - Linux/Mac: `~/.local/share/agentflow/`
   - Windows: `%APPDATA%/agentflow/`
   - ä¸è¡Œä¸šæ ‡å‡†ä¸€è‡´

2. **æ•°æ®é›†ä¸­ç®¡ç†**
   - ä¾¿äºå¤‡ä»½å’Œè¿ç§»
   - ä¾¿äºè·¨é¡¹ç›®æŸ¥è¯¢
   - ä¾¿äºæ•°æ®åˆ†æå’Œå¯è§†åŒ–

3. **éƒ¨ç½²çµæ´»æ€§**
   - äºŒè¿›åˆ¶æ–‡ä»¶å¯å®‰è£…åˆ°å…¨å±€ PATH
   - é¡¹ç›®ç›®å½•ä»…ä¿ç•™è½»é‡çº§é…ç½®
   - åˆ é™¤é¡¹ç›®ä¸å½±å“å†å²æ•°æ®

4. **ä¸ç°æœ‰å·¥å…·ä¸€è‡´**
   - Git: `~/.gitconfig` + é¡¹ç›® `.git/`
   - VSCode: `~/.config/Code` + é¡¹ç›® `.vscode/`
   - Docker: `~/.docker` + é¡¹ç›® `Dockerfile`

---

### 2.2 æ•°æ®åº“ Schema å‡çº§ (Phase 2)

#### å˜æ›´å†…å®¹

ä¸ºæ‰€æœ‰æ ¸å¿ƒè¡¨æ·»åŠ  `project_id` å­—æ®µï¼š

```sql
-- å½“å‰ Schema
CREATE TABLE tasks (
    id TEXT PRIMARY KEY,
    prompt TEXT,
    -- ...
);

-- ç›®æ ‡ Schema
CREATE TABLE tasks (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,  -- æ–°å¢
    prompt TEXT,
    -- ...
);

CREATE INDEX idx_tasks_project ON tasks(project_id);
```

#### åˆç†æ€§è¯„ä¼°

âœ… **åˆç†ä¸”å¿…è¦** - ç†ç”±ï¼š

1. **æ•°æ®éš”ç¦»**
   - ä¸åŒé¡¹ç›®çš„æ•°æ®é€»è¾‘éš”ç¦»
   - é¿å…æ•°æ®æ··æ·†

2. **æŸ¥è¯¢æ€§èƒ½**
   - é€šè¿‡ç´¢å¼•åŠ é€ŸæŒ‰é¡¹ç›®æŸ¥è¯¢
   - æ”¯æŒè·¨é¡¹ç›®ç»Ÿè®¡åˆ†æ

3. **æ‰©å±•æ€§**
   - ä¸ºæœªæ¥çš„å¤šç§Ÿæˆ·æ”¯æŒåšå‡†å¤‡
   - ä¾¿äºå®ç°é¡¹ç›®çº§åˆ«æƒé™æ§åˆ¶

#### é£é™©ä¸åº”å¯¹

| é£é™© | åº”å¯¹æªæ–½ |
|------|----------|
| æ•°æ®è¿ç§»å¤æ‚ | æä¾›ä¸€é”®è¿ç§»å·¥å…· `agentflow admin migrate` |
| Schema ä¸å…¼å®¹ | ç‰ˆæœ¬å·ç®¡ç† + å‘åå…¼å®¹æ£€æŸ¥ |
| æ€§èƒ½ä¸‹é™ | é€šè¿‡ç´¢å¼•ä¼˜åŒ– + å®šæœŸ VACUUM |

---

### 2.3 é¡¹ç›®å‘ç°æœºåˆ¶ (Phase 3)

#### å®ç°é€»è¾‘

```rust
// ä»å½“å‰ç›®å½•å‘ä¸ŠæŸ¥æ‰¾ .agentflow/project.toml
pub fn discover(cwd: PathBuf) -> Option<ProjectContext> {
    let mut current = cwd;
    loop {
        let config_path = current.join(".agentflow/project.toml");
        if config_path.exists() {
            return Some(ProjectContext {
                id: read_project_id(&config_path),
                root_path: current,
                name: read_project_name(&config_path),
            });
        }

        // åˆ°è¾¾æ ¹ç›®å½•ï¼Œæœªæ‰¾åˆ°
        if current.parent().is_none() {
            return None;
        }

        current = current.parent()?.to_path_buf();
    }
}

// æœªæ‰¾åˆ°é…ç½®æ—¶ä½¿ç”¨è·¯å¾„å“ˆå¸Œ
pub fn fallback(cwd: PathBuf) -> ProjectContext {
    let id = format!("temp-{:x}", md5_compute(&cwd));
    ProjectContext {
        id,
        root_path: cwd,
        name: "Unnamed".into(),
    }
}
```

#### åˆç†æ€§è¯„ä¼°

âœ… **åˆç†** - ç†ç”±ï¼š

1. **çµæ´»æ€§**
   - æ”¯æŒæœ‰é…ç½®é¡¹ç›®ï¼ˆè¯»å– project.tomlï¼‰
   - æ”¯æŒæ— é…ç½®é¡¹ç›®ï¼ˆè‡ªåŠ¨ç”Ÿæˆ IDï¼‰

2. **å®¹é”™æ€§**
   - æœªæ‰¾åˆ°é…ç½®ä¸æŠ¥é”™ï¼Œä½¿ç”¨ fallback
   - ç±»ä¼¼ Git çš„è¡Œä¸ºï¼ˆåœ¨ä»»æ„ç›®å½•éƒ½èƒ½è¿è¡Œï¼‰

3. **æ¸è¿›å¼è¿ç§»**
   - æ—§é¡¹ç›®æ—  project.toml ä¹Ÿèƒ½å·¥ä½œ
   - æç¤ºç”¨æˆ·è¿ç§»ï¼Œè€Œéå¼ºåˆ¶

---

### 2.4 æŠ€èƒ½å®‰è£…ä¸ç¯å¢ƒæ£€æµ‹ (Phase 4)

#### æ£€æµ‹é€»è¾‘

```rust
pub fn execute(args: InstallArgs) -> Result<()> {
    // 1. åˆå§‹åŒ–å…¨å±€ç›®å½•
    AgentFlowPaths::ensure()?;

    // 2. æ£€æµ‹æ—§ç»“æ„
    let local_db = PathBuf::from("./.agentflow/agentflow.db");
    if local_db.exists() {
        println!("âš ï¸  æ£€æµ‹åˆ°æ—§ç‰ˆæœ¬çš„é¡¹ç›®æ•°æ®ç»“æ„ã€‚");
        println!("   å»ºè®®è¿è¡Œ 'agentflow admin migrate' è¿ç§»è‡³ ~/.agentflow/");
    }

    // 3. ç»§ç»­æ­£å¸¸é€»è¾‘
    // ...
}
```

#### åˆç†æ€§è¯„ä¼°

âœ… **ä¼˜ç§€** - ç†ç”±ï¼š

1. **ç”¨æˆ·ä½“éªŒå‹å¥½**
   - ä¸å¼ºåˆ¶è¿ç§»ï¼Œä»…æç¤º
   - æ˜ç¡®å‘ŠçŸ¥è¿ç§»å‘½ä»¤
   - é¿å…çªç„¶ç ´åç°æœ‰å·¥ä½œæµ

2. **æ¸è¿›å¼å‡çº§**
   - ç”¨æˆ·å¯é€‰æ‹©ä½•æ—¶è¿ç§»
   - æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬å¯ä»¥å…±å­˜

3. **å®¹é”™æ€§å¼º**
   - æç¤ºä¿¡æ¯æ¸…æ™°
   - æä¾›å›é€€æ–¹æ¡ˆ

---

### 2.5 æ‰§è¡Œå™¨æ”¹é€  (Phase 5)

#### å˜æ›´å†…å®¹

**å½“å‰æµç¨‹**:
```rust
pub async fn execute(&self, prompt: &str) -> Result<ExecutionResult> {
    // å›ºå®šåœ¨ workspace_path æ‰§è¡Œ
    cmd.current_dir(&self.workspace_path);
    // ...
}
```

**ç›®æ ‡æµç¨‹**:
```rust
pub async fn execute(&self, task: Task) -> Result<ExecutionResult> {
    // 1. ä¿å­˜å½“å‰ç›®å½•
    let original_dir = std::env::current_dir()?;

    // 2. åˆ‡æ¢åˆ°ä»»åŠ¡æŒ‡å®šçš„é¡¹ç›®ç›®å½•
    std::env::set_current_dir(&task.repo_path)?;

    // 3. è¯»å–é¡¹ç›®é…ç½®
    let project_ctx = ProjectContext::discover(task.repo_path)?;

    // 4. æ‰§è¡Œä»»åŠ¡
    let result = self.run_cli(task.prompt).await?;

    // 5. æ¢å¤ç›®å½•
    std::env::set_current_dir(original_dir)?;

    // 6. å­˜å‚¨åˆ°å…¨å±€æ•°æ®åº“ï¼ˆå¸¦ project_idï¼‰
    self.db.insert(task.id, project_ctx.id, result).await?;

    Ok(result)
}
```

#### åˆç†æ€§è¯„ä¼°

âœ… **å¿…è¦** - ç†ç”±ï¼š

1. **æ”¯æŒå¤šé¡¹ç›®**
   - ä¸åŒé¡¹ç›®çš„ä»»åŠ¡åœ¨ä¸åŒç›®å½•æ‰§è¡Œ
   - è‡ªåŠ¨å¤„ç†é¡¹ç›®åˆ‡æ¢

2. **æ•°æ®æ­£ç¡®æ€§**
   - ç¡®ä¿ Git æ“ä½œåœ¨æ­£ç¡®çš„ä»“åº“
   - ç¡®ä¿ AGENTFLOW.md è¯»å–æ­£ç¡®

3. **åˆ†å¸ƒå¼è°ƒåº¦**
   - Master å¯ä»¥å°†ä»»åŠ¡åˆ†å‘åˆ°ä¸åŒé¡¹ç›®
   - Edge Node å¯ä»¥å¤„ç†å¤šä¸ªé¡¹ç›®

---

### 2.6 æ•°æ®è¿ç§»å·¥å…· (Phase 6)

#### åŠŸèƒ½éœ€æ±‚

```bash
agentflow admin migrate

# åŠŸèƒ½ï¼š
# 1. æ‰«æå½“å‰ç›®å½•ï¼ˆæˆ–æŒ‡å®šç›®å½•ï¼‰
# 2. å¯»æ‰¾ .agentflow/agentflow.db
# 3. è¯»å–æ—§æ•°æ®
# 4. æ ¹æ® project.toml ç”Ÿæˆ project_idï¼ˆè‹¥æ— åˆ™ç”¨ç›®å½•åï¼‰
# 5. å†™å…¥ ~/.agentflow/agentflow.db
# 6. å¤‡ä»½æ—§æ•°æ®åº“ä¸º .agentflow/agentflow.db.bak
```

#### åˆç†æ€§è¯„ä¼°

âœ… **å…³é”®** - ç†ç”±ï¼š

1. **å¹³æ»‘å‡çº§**
   - ç”¨æˆ·ä¸ä¼šä¸¢å¤±æ•°æ®
   - ä¸€é”®è¿ç§»ï¼Œé™ä½é—¨æ§›

2. **å®‰å…¨æ€§**
   - è‡ªåŠ¨å¤‡ä»½æ—§æ•°æ®
   - è¿ç§»å¤±è´¥å¯å›æ»š

3. **è‡ªåŠ¨åŒ–**
   - æ‰¹é‡è¿ç§»å¤šä¸ªé¡¹ç›®
   - å‡å°‘æ‰‹åŠ¨æ“ä½œ

---

## 3. ä¼˜å…ˆçº§è¯„ä¼°

### P0 (ç«‹å³å®ç°) - v0.4.0 æ ¸å¿ƒ

| é˜¶æ®µ | å·¥æœŸ | ä¾èµ– | ä»·å€¼ |
|------|------|------|------|
| **Phase 1: è·¯å¾„ç®¡ç†** | 1-2 å¤© | æ—  | åŸºç¡€è®¾æ–½ |
| **Phase 2: Schema å‡çº§** | 2-3 å¤© | Phase 1 | æ•°æ®éš”ç¦» |
| **Phase 3: é¡¹ç›®å‘ç°** | 1-2 å¤© | Phase 2 | è‡ªåŠ¨åŒ– |

**å°è®¡**: 4-7 å¤©

### P1 (å°½å¿«å®ç°) - ç”¨æˆ·ä½“éªŒ

| é˜¶æ®µ | å·¥æœŸ | ä¾èµ– | ä»·å€¼ |
|------|------|------|------|
| **Phase 4: ç¯å¢ƒæ£€æµ‹** | 1 å¤© | Phase 3 | å‹å¥½æç¤º |
| **Phase 5: æ‰§è¡Œå™¨æ”¹é€ ** | 2-3 å¤© | Phase 3 | å¤šé¡¹ç›®æ”¯æŒ |

**å°è®¡**: 3-4 å¤©

### P2 (å¢å€¼åŠŸèƒ½) - å·¥å…·é“¾

| é˜¶æ®µ | å·¥æœŸ | ä¾èµ– | ä»·å€¼ |
|------|------|------|------|
| **Phase 6: æ•°æ®è¿ç§»** | 2-3 å¤© | Phase 2 | æ•°æ®ä¿æŠ¤ |

**å°è®¡**: 2-3 å¤©

---

## 4. ä¸ç°æœ‰ç‰ˆæœ¬çš„å…³ç³»

### ç‰ˆæœ¬ä¾èµ–å›¾

```
v0.2.0 (è®°å¿†å·¥ä½œæµ) âœ…
    â†“
v0.2.1 (Skill å¼•å¯¼) âœ…
    â†“
v0.2.3 (Git å·¥ä½œæµ) ğŸ”„ Phase 1 å®Œæˆ
    â†“
v0.3.0 (æ™ºè°±æ¸…è¨€ + å¤§å±) ğŸ”„ Phase 1 å®Œæˆ
    â†“
v0.4.0 (æ¶æ„é‡æ„) ğŸ“… è®¡åˆ’ä¸­
    â†“
v1.0.0 (ç”Ÿäº§å°±ç»ª) ğŸ”® æœªæ¥
```

### å®æ–½æ—¶æœºå»ºè®®

**æ–¹æ¡ˆ A: ç«‹å³å¯åŠ¨ v0.4.0** â­ æ¨è
- âœ… ä¼˜ç‚¹ï¼š
  - é¿å…æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯
  - åç»­åŠŸèƒ½åŸºäºæ–°æ¶æ„æ›´ç®€å•
  - ç”¨æˆ·é‡å°‘æ—¶è¿ç§»æˆæœ¬ä½
- âš ï¸ ç¼ºç‚¹ï¼š
  - çŸ­æœŸå†…æ— æ–°åŠŸèƒ½äº¤ä»˜
  - éœ€è¦ç”¨æˆ·é…åˆè¿ç§»

**æ–¹æ¡ˆ B: å…ˆå®Œæˆ v0.2.3/v0.3.0**
- âœ… ä¼˜ç‚¹ï¼š
  - å¿«é€Ÿäº¤ä»˜æ–°åŠŸèƒ½
  - ç”¨æˆ·ç«‹å³çœ‹åˆ°ä»·å€¼
- âš ï¸ ç¼ºç‚¹ï¼š
  - æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯
  - åç»­è¿ç§»æˆæœ¬æ›´é«˜

**æ¨è**: é‡‡ç”¨æ–¹æ¡ˆ Aï¼Œç†ç”±ï¼š
1. å½“å‰ç”¨æˆ·é‡å°‘ï¼Œè¿ç§»æˆæœ¬ä½
2. æ¶æ„é‡æ„è¶Šæ—©è¶Šå¥½
3. v0.4.0 æ˜¯ç”Ÿäº§å°±ç»ªçš„å¿…è¦å‰æ

---

## 5. å®æ–½è·¯çº¿å›¾

### é˜¶æ®µåˆ’åˆ†

#### Phase 1: è·¯ï¿½è·ƒåˆ° v0.4.0 (æ¶æ„é‡æ„ä¼˜å…ˆ)

**Week 1: åŸºç¡€è®¾æ–½**
- Day 1-2: Phase 1 - è·¯å¾„ç®¡ç†æ¨¡å—
- Day 3-5: Phase 2 - æ•°æ®åº“ Schema å‡çº§
- Day 6-7: Phase 3 - é¡¹ç›®å‘ç°æœºåˆ¶

**Week 2: åŠŸèƒ½é›†æˆ**
- Day 1-2: Phase 4 - ç¯å¢ƒæ£€æµ‹æç¤º
- Day 3-5: Phase 5 - æ‰§è¡Œå™¨æ”¹é€ 

**Week 3: å·¥å…·é“¾**
- Day 1-3: Phase 6 - æ•°æ®è¿ç§»å·¥å…·
- Day 4-5: é›†æˆæµ‹è¯•
- Day 6-7: æ–‡æ¡£å’Œå‘å¸ƒ

#### Phase 2: å›å½’åŠŸèƒ½å¼€å‘

**Week 4-5: v0.2.3 Phase 2** (åŸºäºæ–°æ¶æ„)
- DAG ä»»åŠ¡è°ƒåº¦å™¨
- åˆ†å¸ƒå¼ä»»åŠ¡åˆ†å‘

**Week 6-7: v0.3.0 Phase 2** (åŸºäºæ–°æ¶æ„)
- CLI æ„å›¾è§£æé›†æˆ
- å¤§å±åŸºç¡€æ¡†æ¶

---

## 6. é£é™©ä¸åº”å¯¹

| é£é™© | çº§åˆ« | åº”å¯¹æªæ–½ |
|------|------|----------|
| **æ•°æ®è¿ç§»å¤±è´¥** | ğŸ”´ é«˜ | 1. è‡ªåŠ¨å¤‡ä»½ï¼›2. è¿ç§»æµ‹è¯•ï¼›3. å›æ»šæœºåˆ¶ |
| **ç”¨æˆ·ä¸é€‚åº”** | ğŸŸ¡ ä¸­ | 1. æ¸è¿›å¼æç¤ºï¼›2. è¯¦ç»†æ–‡æ¡£ï¼›3. å…¼å®¹æ—§ç‰ˆæœ¬ |
| **æ€§èƒ½ä¸‹é™** | ğŸŸ¡ ä¸­ | 1. ç´¢å¼•ä¼˜åŒ–ï¼›2. æŸ¥è¯¢ä¼˜åŒ–ï¼›3. æ€§èƒ½æµ‹è¯• |
| **Breaking Changes** | ğŸŸ¡ ä¸­ | 1. ç‰ˆæœ¬å·ç®¡ç†ï¼›2. è¿ç§»æ£€æŸ¥ï¼›3. è­¦å‘Šæç¤º |

---

## 7. éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

1. **å…¨å±€å®‰è£…**
   ```bash
   cargo install --path .
   agentflow --version  # åœ¨ä»»æ„ç›®å½•å¯è¿è¡Œ
   ```

2. **é¡¹ç›®åˆå§‹åŒ–**
   ```bash
   cd ~/code/MyProject
   agentflow skill init
   # ~/.agentflow/agentflow.db åˆ›å»º
   # ./agentflow/project.toml åˆ›å»º
   ```

3. **å¤šé¡¹ç›®æ”¯æŒ**
   ```bash
   cd ~/code/ProjectA
   agentflow run "æµ‹è¯• A"

   cd ~/code/ProjectB
   agentflow run "æµ‹è¯• B"

   # ä¸¤ä¸ªé¡¹ç›®çš„æ•°æ®åœ¨ ~/.agentflow/agentflow.db ä¸­éš”ç¦»
   ```

4. **æ•°æ®è¿ç§»**
   ```bash
   cd ~/old-project
   agentflow admin migrate
   # .agentflow/agentflow.db â†’ ~/.agentflow/agentflow.db
   # .agentflow/agentflow.db.bak å¤‡ä»½
   ```

### æ€§èƒ½éªŒæ”¶

- å•é¡¹ç›®æŸ¥è¯¢æ€§èƒ½ < 100ms
- å¤šé¡¹ç›®ç»Ÿè®¡æŸ¥è¯¢ < 500ms
- æ•°æ®åº“å¤§å° < 100MBï¼ˆ1000 ä¸ªä»»åŠ¡ï¼‰

---

## 8. å†³ç­–å»ºè®®

### æ¨èå†³ç­–

âœ… **ç«‹å³å¯åŠ¨ v0.4.0 æ¶æ„é‡æ„**

**ç†ç”±**ï¼š
1. å½“å‰æ˜¯æœ€ä½³æ—¶æœºï¼ˆç”¨æˆ·é‡å°‘ï¼Œè¿ç§»æˆæœ¬ä½ï¼‰
2. æ¶æ„é‡æ„è¶Šæ—©è¶Šå¥½ï¼ˆé¿å…æŠ€æœ¯å€ºåŠ¡ç´¯ç§¯ï¼‰
3. v0.4.0 æ˜¯ç”Ÿäº§å°±ç»ªçš„å¿…è¦å‰æ
4. ä¸ç°æœ‰åŠŸèƒ½æ— å†²çªï¼ˆå¯å¹¶è¡Œæ¨è¿›ï¼‰

### å®æ–½ç­–ç•¥

**ä¸‰æ­¥èµ°æˆ˜ç•¥**ï¼š

1. **Step 1: å®Œæˆ v0.4.0 æ ¸å¿ƒ** (Week 1-3)
   - Phase 1-3ï¼šè·¯å¾„ã€Schemaã€é¡¹ç›®å‘ç°
   - ä¼˜å…ˆçº§ P0

2. **Step 2: éªŒè¯å’Œæµ‹è¯•** (Week 4)
   - åŠŸèƒ½æµ‹è¯•
   - æ€§èƒ½æµ‹è¯•
   - è¿ç§»æµ‹è¯•

3. **Step 3: ç»§ç»­åŠŸèƒ½å¼€å‘** (Week 5+)
   - v0.2.3 Phase 2 (DAG è°ƒåº¦å™¨)
   - v0.3.0 Phase 2 (CLI é›†æˆ)
   - åŸºäº v0.4.0 æ–°æ¶æ„

---

## 9. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯åš

1. **åˆ›å»ºå¼€å‘åˆ†æ”¯**
   ```bash
   git checkout -b feature/0.4.0-refactor
   ```

2. **å¯åŠ¨ Phase 1: è·¯å¾„ç®¡ç†**
   - æ·»åŠ  `dirs` ä¾èµ–
   - å®ç° `AgentFlowPaths` æ¨¡å—
   - å•å…ƒæµ‹è¯•

3. **å¯åŠ¨ Phase 2: Schema å‡çº§**
   - è®¾è®¡ Migration è„šæœ¬
   - æ›´æ–°æ•°æ®è®¿é—®å±‚
   - å…¼å®¹æ€§æµ‹è¯•

### å¹¶è¡Œä»»åŠ¡

1. **å®Œæˆ v0.2.3 Phase 2** (åŸºäºæ–°æ¶æ„)
2. **å®Œæˆ v0.3.0 Phase 2** (åŸºäºæ–°æ¶æ„)
3. **é›†æˆæµ‹è¯•ä¸æ–‡æ¡£**

---

**æœ€åæ›´æ–°**: 2026-01-28
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**çŠ¶æ€**: å¾…è¯„å®¡
