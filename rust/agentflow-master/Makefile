# AgentFlow Master Makefile

.PHONY: all build run test clean check fmt clippy doc help

# é»˜è®¤ç›®æ ‡
all: build

# æ„å»ºé¡¹ç›®
build:
	@echo "ğŸ”¨ æ„å»º AgentFlow Master..."
	cargo build --release

# è¿è¡ŒæœåŠ¡å™¨
run:
	@echo "ğŸš€ å¯åŠ¨ AgentFlow Master..."
	cargo run --bin agentflow-master

# å¼€å‘æ¨¡å¼è¿è¡Œï¼ˆè‡ªåŠ¨é‡æ–°åŠ è½½ï¼‰
dev:
	@echo "ğŸ”¥ å¼€å‘æ¨¡å¼å¯åŠ¨..."
	cargo watch -x run

# è¿è¡Œæµ‹è¯•
test:
	@echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
	cargo test -p agentflow-master

# æµ‹è¯•ï¼ˆå¸¦è¾“å‡ºï¼‰
test-verbose:
	@echo "ğŸ§ª è¿è¡Œæµ‹è¯•ï¼ˆè¯¦ç»†è¾“å‡ºï¼‰..."
	cargo test -p agentflow-master -- --nocapture

# é›†æˆæµ‹è¯•ï¼ˆéœ€è¦æœåŠ¡å™¨è¿è¡Œï¼‰
test-integration:
	@echo "ğŸ”— è¿è¡Œé›†æˆæµ‹è¯•..."
	cargo test -p agentflow-master --test integration_test

# æ¸…ç†æ„å»ºæ–‡ä»¶
clean:
	@echo "ğŸ§¹ æ¸…ç†æ„å»ºæ–‡ä»¶..."
	cargo clean
	rm -rf target/

# æ£€æŸ¥ä»£ç 
check:
	@echo "ğŸ” æ£€æŸ¥ä»£ç ..."
	cargo check -p agentflow-master

# æ ¼å¼åŒ–ä»£ç 
fmt:
	@echo "âœ¨ æ ¼å¼åŒ–ä»£ç ..."
	cargo fmt -p agentflow-master

# ä»£ç æ£€æŸ¥
clippy:
	@echo "ğŸ“ ä»£ç æ£€æŸ¥..."
	cargo clippy -p agentflow-master -- -D warnings

# ç”Ÿæˆæ–‡æ¡£
doc:
	@echo "ğŸ“š ç”Ÿæˆæ–‡æ¡£..."
	cargo doc -p agentflow-master --no-deps --open

# è¿è¡Œç¤ºä¾‹
example-client:
	@echo "ğŸ¯ è¿è¡Œå®¢æˆ·ç«¯ç¤ºä¾‹..."
	cargo run --example client

# å®‰è£…ä¾èµ–
install:
	@echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
	cargo fetch

# æ•°æ®åº“è¿ç§»
migrate:
	@echo "ğŸ—„ï¸  åˆ›å»ºæ•°æ®åº“..."
	cargo run --bin agentflow-master -- --migrate

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
help:
	@echo "AgentFlow Master Makefile"
	@echo ""
	@echo "å¯ç”¨å‘½ä»¤:"
	@echo "  make build         - æ„å»ºé¡¹ç›®"
	@echo "  make run           - è¿è¡ŒæœåŠ¡å™¨"
	@echo "  make dev           - å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡æ–°åŠ è½½ï¼‰"
	@echo "  make test          - è¿è¡Œæµ‹è¯•"
	@echo "  make test-verbose  - è¿è¡Œæµ‹è¯•ï¼ˆè¯¦ç»†è¾“å‡ºï¼‰"
	@echo "  make test-integration - è¿è¡Œé›†æˆæµ‹è¯•"
	@echo "  make clean         - æ¸…ç†æ„å»ºæ–‡ä»¶"
	@echo "  make check         - æ£€æŸ¥ä»£ç "
	@echo "  make fmt           - æ ¼å¼åŒ–ä»£ç "
	@echo "  make clippy        - ä»£ç æ£€æŸ¥"
	@echo "  make doc           - ç”Ÿæˆæ–‡æ¡£"
	@echo "  make example-client - è¿è¡Œå®¢æˆ·ç«¯ç¤ºä¾‹"
	@echo "  make install       - å®‰è£…ä¾èµ–"
	@echo "  make migrate       - æ•°æ®åº“è¿ç§»"
	@echo "  make help          - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
